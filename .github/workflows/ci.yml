name: CIname: CI



on:on: [push, pull_request]

  push:

    branches: [ "main" ]jobs:

  pull_request:  test:

    branches: [ "main" ]    runs-on: ubuntu-latest

    steps:

jobs:    - uses: actions/checkout@v4

  test-backend:    - name: Set up Python

    name: Python Backend Tests      uses: actions/setup-python@v4

    runs-on: ubuntu-latest      with:

    steps:        python-version: '3.9'

    - uses: actions/checkout@v4    - name: Install dependencies

    - name: Set up Python 3.10      run: |

      uses: actions/setup-python@v4        python -m pip install --upgrade pip

      with:        pip install pytest

        python-version: "3.10"    - name: Run tests

    - name: Install dependencies      run: pytest tests/
      run: |
        python -m pip install --upgrade pip
        pip install flake8 pytest
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    - name: Lint with flake8
      run: |
        # stop the build if there are Python syntax errors or undefined names
        flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
        # exit-zero treats all errors as warnings.
        flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
    - name: Test with pytest
      run: |
        pytest

  test-frontend:
    name: Frontend Tests
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Use Node.js 20
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        cache: 'yarn'
        cache-dependency-path: frontend/yarn.lock
    - name: Install dependencies
      working-directory: ./frontend
      run: yarn install --frozen-lockfile
    - name: Build
      working-directory: ./frontend
      run: yarn build
    - name: Lint
      working-directory: ./frontend
      run: yarn lint
    - name: Test
      working-directory: ./frontend
      run: yarn test
